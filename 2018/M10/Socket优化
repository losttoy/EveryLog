最近项目有机会自己写了一个Socket。在测试过程中遇到一些不稳定。
主要是以下问题，写一下思考过程、解决办法。

1.编写时未考虑前置负载均衡，需增加处理负载均衡的探测报文。
遇到的问题是InputStream.read方法是阻塞的，会一直占用30s。
与运维同事沟通，实际测试，发现负载均衡的请求数据为空。
针对这种情况提前退出。
 改造
 A增加超时设定100ms
 BF5探测报文特殊处理，不打印log

2.测试覆盖
A.1000次请求，并发20.
18:54，1000次有7次主动断开链接。
18次获得socket失败
10次未知交易。（判定为通讯超时9300）发起冲正。
冲正返回的是成功的，但是为什么会未知呢（只有冲正成功才会未知）
需要进一步打印日志，然后观察交易情况。